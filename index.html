<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Editor</title>
    <style>
        /* Your CSS styles here */
    </style>
</head>

<body>
    <div class="top-container">
        <h1 id="Name">John Doe</h1>
        <img id="Image" src="https://i.imgur.com/H1jOpkr.png" alt="Image">
    </div>

    <div class="container" id="dynamicContainers">
        <!-- The expandable containers will be dynamically generated here -->
    </div>

    <script>
        function toggleExpand(element) {
            const content = element.nextElementSibling;
            if (content.style.display === "none" || content.style.display === "") {
                content.style.display = "block";
            } else {
                content.style.display = "none";
            }
        }

        function saveField(fieldId) {
            const fieldValue = document.getElementById(fieldId).value;
            console.log(`Saved ${fieldId}: ${fieldValue}`);

            // Add logic to update the field in the data.json file on GitHub here
        }

        function createExpandableContainer(key, value) {
            const container = document.createElement('div');
            container.className = 'expandable-container';

            const header = document.createElement('h2');
            header.appendChild(document.createTextNode(key));
            header.onclick = () => {
                toggleExpand(header);
            };

            const content = document.createElement('div');
            content.className = 'expandable-content';

            const input = document.createElement('input');
            input.type = 'text';
            input.id = key;
            input.value = value;
            content.appendChild(input);

            const saveButton = document.createElement('button');
            saveButton.innerText = 'Save Changes';
            saveButton.onclick = () => saveField(key);
            content.appendChild(saveButton);

            container.appendChild(header);
            container.appendChild(content);

            return container;
        }

        function fetchGitHubData() {
            const accessToken = 'YOUR_GITHUB_PAT'; // Replace with your actual access token
            const apiUrl = 'https://raw.githubusercontent.com/honorsystem/honorsystem/main/data.json';

            fetch(apiUrl, {
                method: 'GET',
                headers: {
                    'Authorization': `token ${accessToken}`,
                },
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('dynamicContainers').innerHTML = '';
                for (let key in data) {
                    const container = createExpandableContainer(key, data[key]);
                    dynamicContainers.appendChild(container);
                }
                document.getElementById('Name').innerText = `${data.firstName} ${data.lastName}`;
                document.getElementById('Image').src = data.image;
            })
            .catch(error =>
                console.error('Error fetching the JSON data:', error)
            );
        }

        fetchGitHubData();
    </script>
</body>

</html>
